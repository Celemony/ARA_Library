<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ARA SDK 2.2.0: Use Cases and Testing</title>
<link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="shortcut icon" sizes="16x16" href="./favicon.ico">
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="DoxygenStyleSheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ARA_Logo.png" height="50px"/></td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('test_cases.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Use Cases and Testing </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md45">Synopsis</a></li>
<li class="level1"><a href="#autotoc_md46">Render Timing</a></li>
<li class="level1"><a href="#autotoc_md47">Musical Timing</a></li>
<li class="level1"><a href="#autotoc_md48">Time Stretching</a></li>
<li class="level1"><a href="#autotoc_md49">Signal Flow And Routing</a></li>
<li class="level1"><a href="#autotoc_md50">Maintaining The ARA Model</a></li>
<li class="level1"><a href="#autotoc_md51">Audio-MIDI Conversion</a></li>
<li class="level1"><a href="#autotoc_md52">Key Signatures And Chords</a></li>
<li class="level1"><a href="#autotoc_md53">Persistence</a></li>
<li class="level1"><a href="#autotoc_md54">Versioning</a></li>
<li class="level1"><a href="#autotoc_md55">UI-Related Topics</a></li>
<li class="level1"><a href="#autotoc_md56">General</a></li>
</ul>
</div>
<div class="textblock"><p></p>
<h1><a class="anchor" id="autotoc_md45"></a>
Synopsis</h1>
<p>A major challenge when adopting an API as flexible and complex as ARA is understanding the potential use cases that will be encountered across all the possible host/plug-in combinations, and to design and test implementations accordingly. <br>                               This chapter describes various use cases that each host and plug-in should be aware of in order to build high quality ARA integrations. Intense quality insurance is key to a stable and thriving overall ARA platform and great user experience - passing this checklist as applicable is therefore also a prerequisite for Celemony granting developers the right to use its ARA Audio Random Access trademark for marketing a ARA-enabled products as such. <br>                               As a living document, this chapter will be regularly updated whenever common issues in current implementations become apparent. <br>                              </p>
<p>As both hosts and plug-ins have very different features and capabilities, many of the following use cases may not apply in a specific host/plug-in combination. For example, a restoration plug-in will typically not bother with musical timing, time-stretching or MIDI notes. Nevertheless, all features which make sense in the given context shall be properly supported by all hosts and plug-ins that pick up ARA. <br>                              </p>
<p>While testing, developers should also utilize the ARA Test Host and ARA Test Plug-In examples provided with the ARA SDK as well as Melodyne, which all feature extensive testing and validation as outlined in the <a class="el" href="implementing_a_r_a.html#sec_UtilizingExamples">previous chapter</a>.</p>
<h1><a class="anchor" id="autotoc_md46"></a>
Render Timing</h1>
<ul>
<li>Is sample timing correct in all cases? (It's easy to encounter an occasional single-sample offset due to rounding errors when feeding the plug-in's sample time)</li>
<li>Is the latency of post-ARA realtime effects and audio hardware properly compensated for?<ul>
<li>Is the playback still sample accurate across different tracks with different latencies?</li>
<li>For meters or playback location displays, is visual latency compensation working? (see VST3's <code>Steinberg::Vst::IAudioPresentationLatency</code> and AudioUnit's <code>kAudioUnitProperty_PresentationLatency</code>)</li>
</ul>
</li>
<li>If implemented in the host, do user-accessible track delay and/or region delay parameters still work properly when using ARA?</li>
</ul>
<h1><a class="anchor" id="autotoc_md47"></a>
Musical Timing</h1>
<ul>
<li>If both host and plug-in use musical song timing (tempo and signatures), is it properly exchanged? This can be tested both with Melodyne or the experimental <a href="https://github.com/Celemony/JUCE_ARA/tree/develop/examples/Plugins/ARAPluginDemo.h">JUCE_ARA plug-in demo</a>.<ul>
<li>Is the beat timeline drawn in the plug-in identical to the one drawn in the host?</li>
<li>Does the plug-in follow edits in the host timeline properly?</li>
<li>Does the grid align with the metronome/click track?</li>
<li>Can your implementation handle multiple tempo changes and multiple signature changes?</li>
<li>Is the musical timing always in sync when the latency compensation is active (both directions)?</li>
</ul>
</li>
<li>If both host and plug-in use musical timing for audio sources, is it properly synchronized in both directions?<ul>
<li>If the host knows the file tempo and signature before the plug-in is added, does the plug-in read that information properly?</li>
<li>If not known before inserting, and the plug-in can analyze this, is the analysis result picked up by the host?</li>
<li>Does the plug-in update properly if the audio source tempo or signatures are edited in the host, and vice versa?</li>
</ul>
</li>
<li>If supported by the host, can audio source tempo and signature analysis provided by the plug-in copied to the song timeline? For example, Studio One implements this by letting users drag events (i.e. playback regions) to the timeline.</li>
</ul>
<h1><a class="anchor" id="autotoc_md48"></a>
Time Stretching</h1>
<ul>
<li>Does time-stretching work properly? Using an example audio file with a drum track that starts at 120 bpm then has a ritardando to 90 bpm:<ul>
<li>can the user have this drum file analyzed in the plug-in and make it fit a song with constant 120 bpm? (As a host, have the audio analyzed by the plug-in, then read the timeline to find out the number of beats in the file, then in the host timeline pick a range with the same number of beats, then set up an according playback region and activate the <a class="el" href="group___model___playback___region.html#gga258336ff5f674225e3ec403493461179ad0c5da282e792ae38e3551fec63c4e45">TimestretchReflectingTempo</a> flag</li>
<li>Starting from the results of the previous test, can the user stretch the file to halftime by either entering a stretch factor in the host or by dragging (if supported by the host)? Does the result sound correct in both cases?</li>
<li>Starting from the results of the first test, can the user use Melodyne's tempo dialog to re-interpret the tempo as halftime (so that the region/event is extended properly)?</li>
<li>Can the user do the opposite of the first test and make the song timeline fit the drum file? (As a host, have the audio analyzed by the plug-in, then read the timeline and copy the tempo curve to the song timeline, then set up a playback region that does not modify the file upon playback)</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md49"></a>
Signal Flow And Routing</h1>
<ul>
<li>Are crossfades set in the host rendered correctly?</li>
<li>Are content based fades rendered correctly (if implemented by the plug-in and supported by the host)?</li>
<li>Does region/event solo/mute/volume behave as expected?</li>
<li>Does track solo/mute/volume behave as expected?</li>
<li>Is bypass behaving properly for ARA? (If the host chooses to bypass ARA plug-ins, it will need to apply any transformation done by the plug-in on its own - this may be tough esp. with regards to the the <a class="el" href="group___model___playback___region.html#gga258336ff5f674225e3ec403493461179ad0c5da282e792ae38e3551fec63c4e45">TimestretchReflectingTempo</a> flag. The easier choice is to not implement bypass for ARA on the host side and instead leave that up to the plug-in.)</li>
</ul>
<h1><a class="anchor" id="autotoc_md50"></a>
Maintaining The ARA Model</h1>
<ul>
<li>Does undo/redo in the host work as expected if ARA-fied regions/events are involved? (Note: it may be necessary to keep some ARA objects around for Undo even if not used elsewhere, see <a class="el" href="group___plug-_in___document___controller.html#a85ac14fe2e666eab8a6f63e1cebc7a70">deactivateAudioSource/ModificationForUndoHistory</a>)</li>
<li>If the host has a concept of alias versus copy of regions/events, do edits in the plug-in reflect accordingly across alias regions/events while not affecting copied regions/events?</li>
<li>If the host has a concept of track versions/alternatives and supports multiple audio modifications per audio source, does it correctly create individual modifications per track version/alternative?</li>
</ul>
<h1><a class="anchor" id="autotoc_md51"></a>
Audio-MIDI Conversion</h1>
<ul>
<li>If implemented on both sides, does audio-to-MIDI work properly?<ul>
<li>Is the timing of the MIDI 100% in sync with the audio?</li>
<li>Are the MIDI pitches correct? (It's easy to be off by an octave here because there are different interpretations between Yamaha and Roland of what pitch a "C1" has)</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md52"></a>
Key Signatures And Chords</h1>
<ul>
<li>Are enharmonic equivalents properly distinguished based on the circle of fifth index?</li>
<li>Are the interval roles properly evaluated to distinguish e.g. from 2 from 9?</li>
<li>If the name is provided or evaluated, are the music related unicode characters (sharp, flat, triangle etc.) properly handled?</li>
<li>When reading chords, and the internal chord model is covering only a subset of the possible ARA chords, are there reasonable fallbacks for the cases not covered?</li>
</ul>
<h1><a class="anchor" id="autotoc_md53"></a>
Persistence</h1>
<ul>
<li>Can documents be archived and restored properly with all edits in tact (see also ARA Test Host <code>testArchiving()</code>)?<ul>
<li>When doing a bounce, is the output identical before saving and after restoring?</li>
</ul>
</li>
<li>When restoring, does your host/plug-in fail gracefully if media files are missing (audio sources samples not available)?<ul>
<li>Does the document recover properly if media files are re-assigned after they were missing upon restoring?</li>
</ul>
</li>
<li>Are archiving progress notifications being sent / received properly?</li>
<li>Is drag/drop and copy/paste between documents properly including the respective ARA object state (see also ARA Test Host <code>testDragAndDrop()</code>)?</li>
<li>Are ARA audio file chunks supported (see also ARA Test Host <code>testAudioFileChunkLoading()</code>)?<ul>
<li>Audio files with chunks can be created by Melodyne 5 Standalone by storing detection data into the audio file. Is that detection data loaded properly when using Melodyne as ARA plug-in for such a file?</li>
<li>SpectraLayers 7 also creates ARA-enhanced files on demand when dragging layers out of the plug-in. These chunks request that the plug-in is opened automatically when the file is added, does this work?</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md54"></a>
Versioning</h1>
<ul>
<li>On the host side, are the supported API generations evaluated properly?<ul>
<li>Is there a proper error message for the user if a plug-in is either too old or too new?</li>
</ul>
</li>
<li>On the host side, are the versioned plug-in archive IDs properly stored and evaluated?<ul>
<li>If a document is loaded which contains an incompatible plug-in chunk from a newer version of the plug-in, is there a proper error message containing the appropriate information about the newer plug-in? Is loading the incompatible chunk properly suppressed? This can be tested e.g. with Melodyne 5 vs. 4.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md55"></a>
UI-Related Topics</h1>
<ul>
<li>Does rendering in stop mode work if the UI is open?<ul>
<li>Do editing operations in the plug-in (e.g. dragging a blob up and down in Melodyne) provide audible editor rendering results in stop mode?</li>
<li>Does the playback cursor in the plug-in follow the playback cursor in your host in stop mode?</li>
</ul>
</li>
<li>Does host playback control from the plug-in work work?<ul>
<li>Are the cycle ranges properly synchronized between the plug-in and the host, with each side reflecting the changes on the other?</li>
</ul>
</li>
<li>Is key command handling working properly?<ul>
<li>Are all key commands properly handled by the plug-in when its view has the focus (regardless of whether they are bound to menu items in the plug-in's menus or "free" commands not bound to a menu)?</li>
<li>Are they properly ignored by the plug-in when has no focus?</li>
<li>Is there any conflicts when both the host and the plug-in implement the same key command, such as the standard key commands for copy/undo/paste or space bar for playback start?</li>
<li>Does it work across Windows, macOS, Linux (if applicable)?</li>
</ul>
</li>
<li>In the given host/plug-in scenario, does it make sense to optionally <a class="el" href="implementing_a_r_a.html#sec_ViewEmbedding">integrate the plug-in view into the main window</a> like Studio One, Cubase and other hosts do with Melodyne?</li>
<li>Does embedding the plug-in view into the host work fine in all places where it is implemented (separate window or embedded into a single-window-approach)?<ul>
<li>Does resizing the view behave correctly?</li>
<li>Is repeatedly opening/closing views or switching between views of different plug-in instances working fine?</li>
<li>Does it work across Windows, macOS, Linux (if applicable)?</li>
<li>Is HiDPI supported properly?</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md56"></a>
General</h1>
<ul>
<li>Does the implementation scale well both in terms of CPU and memory usage when being used with many long audio files at the same time (e.g. a real-life test scenario with a 30 minutes life-recording of 20+ tracks)?</li>
<li>When reading UTF8-encoded strings from the other side, are any normalization requirements (e.g. for the text layout engine) properly enforced?</li>
<li>Does the plug-in scan as an ARA enabled plug-in in the host?<ul>
<li>For AudioUnit plug-in developers, is the <a class="el" href="group___audio___unit__v3.html#gad3b2fc71ec6c6b3c311eb504b56fad83">`</a>ARA"` tag" set in the <code>Info.plist</code> file? </li>
</ul>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
